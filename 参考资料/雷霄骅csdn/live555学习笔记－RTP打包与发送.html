<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <link rel="canonical" href="https://blog.csdn.net/leixiaohua1020/article/details/11850969"/> 
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="referrer" content="always">
    <meta name="description" content="RTP打包与发送

rtp传送开始于函数：MediaSink::startPlaying()。想想也有道理，应是sink跟source要数据，所以从sink上调用startplaying（嘿嘿，相当于directshow的拉模式）。

看一下这个函数：



[cpp] view
 plaincopy






Boolean MediaSink::startPl" />
    <meta name="keywords" content="live555,rtp" />
    <meta http-equiv="Cache-Control" content="no-siteapp" /><link rel="alternate" media="handheld" href="#" />
    <meta name="shenma-site-verification" content="5a59773ab8077d4a62bf469ab966a63b_1497598848">
    <script src="https://csdnimg.cn/release/phoenix/vendor/tingyun/tingyun-rum-blog@js"></script>

    <link href="https://csdnimg.cn/public/favicon.ico" rel="SHORTCUT ICON">
    <title>live555学习笔记－RTP打包与发送 - CSDN博客</title>
    
            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/detail-60a2c245da.min.css">
        <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/themes/skin3-template/skin3-template-88717cedf2.min.css">

    <script type="text/javascript">
        var username = "leixiaohua1020";
        var blog_address = "https://blog.csdn.net/leixiaohua1020";
        var static_host = "https://csdnimg.cn/release/phoenix/";
        var currentUserName = ""; 
        var isShowAds = true;
        var isOwner = false;
        var loginUrl = "https://passport.csdn.net/account/login?from=https://blog.csdn.net/leixiaohua1020/article/details/11850969"
        var blogUrl = "https://blog.csdn.net/";
        var curSkin = "skin3-template";
    </script>
    <script type="text/javascript">
        // Traffic Stats of the entire Web site By baidu
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm@js?6bcd52f51e9b3dce32bec4a3997715ac";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
        // Traffic Stats of the entire Web site By baidu end
    </script>
    <script src="https://csdnimg.cn/public/common/libs/jquery/jquery-1.9.1.min@js" type="text/javascript"></script>
    <script src="https://csdnimg.cn/rabbit/exposure-click/main-1.0.6@js"></script>
    <!-- 新版上报 -->
    <script src="//g.csdnimg.cn/track/1.0.0/track@js" type="text/javascript"></script>
    <!-- 新版上报end -->
            <link rel="stylesheet" href="https://csdnimg.cn/public/sandalstrap/1.3/css/sandalstrap.min.css"> 
    <style>
        .MathJax, .MathJax_Message, .MathJax_Preview{
            display: none
        }
    </style>
</head>
<body>    
    <link rel="stylesheet" href="https://csdnimg.cn/public/common/toolbar/content_toolbar_css/content_toolbar.css">
    
    <script src="https://csdnimg.cn/public/sandalstrap/1.3/fonts/csdnc/csdnc@js"></script><link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/blog_code-c3a0c33d5c.css">
<link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/vendor/pagination/paging.css">
<script type="text/javascript" src="//static.mediav.com/js/mvf_news_feed@js"></script>

<header style="display: none;">
	<div class="container d-flex clearfix">
		<div class="title-box">
			<h2 class="title-blog">
				<a href="https://blog.csdn.net/leixiaohua1020">雷霄骅(leixiaohua1020)的专栏</a>
			</h2>
			<p class="description">一个广院工科生的视音频技术笔记</p>
		</div>
		<div class="opt-box d-flex justify-content-end">
			<a class="btn btn-sm" href="https://blog.csdn.net/leixiaohua1020/rss/list">
					<svg class="icon" aria-hidden="true">
						<use xlink:href="#csdnc-rss"></use>
					</svg>RSS订阅</a>
					</div>
	</div>
</header><script src="https://dup.baidustatic.com/js/ds@js"></script>
<div class="container clearfix pt0" id="mainBox">
    <main style="width: 100%;">
        <div class="blog-content-box">
	<div class="article-title-box">
			<span class="article-type type-2 float-left">转</span>		<h1 class="title-article">live555学习笔记－RTP打包与发送</h1>
	</div>
	<div class="article-info-box">
		<div class="article-bar-top d-flex">
												<span class="time">2013年09月20日 17:16:58</span>
			<div class="float-right">
				<span class="read-count" style="display:none;">阅读数：8501</span>
											</div>
		</div>
	</div>
	<article>
		<div id="article_content" class="article_content_dummy clearfix csdn-tracking-statistics" data-pid="blog"  data-mod=popu_307  data-dsm = "post" >
                    <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/htmledit_views-0a60691e80.css" />
            <div class="htmledit_views">
                
<span style="font-family:Arial; font-size:14px; color:#333333; line-height:26px">RTP打包与发送</span><br style="color:rgb(51,51,51); line-height:26px; font-family:Arial; font-size:14px">
<br>
<span style="font-family:Arial; font-size:14px; color:#333333; line-height:26px">rtp传送开始于函数：MediaSink::startPlaying()。想想也有道理，应是sink跟source要数据，所以从sink上调用startplaying（嘿嘿，相当于directshow的拉模式）。</span><br style="color:rgb(51,51,51); line-height:26px; font-family:Arial; font-size:14px">
<br>
<span style="font-family:Arial; font-size:14px; color:#333333; line-height:26px">看一下这个函数：</span><br style="color:rgb(51,51,51); line-height:26px; font-family:Arial; font-size:14px">
<div class="dp-highlighter bg_cpp" style="margin:18px 0px!important; width:687.04px; color:rgb(51,51,51); line-height:26px; overflow:auto; padding-top:1px; font-family:Consolas,'Courier New',Courier,mono,serif; background-color:rgb(231,229,220)">
<div class="bar" style="padding-left:45px">
<div class="tools" style="padding:3px 8px 10px 10px; color:silver; line-height:normal; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:9px; border-left-color:rgb(108,226,108); border-left-width:3px; border-left-style:solid; background-color:rgb(248,248,248)">
<strong>[cpp]</strong>&nbsp;<a target="_blank" title="view plain" class="ViewSource" href="http://blog.csdn.net/niu_gao/article/details/6921145#" rel="nofollow" target="_blank" style="margin:0px 10px 0px 0px; padding:1px; border:currentColor; width:16px; height:16px; color:rgb(160,160,160); text-indent:-2000px; font-size:9px; text-decoration:none; display:inline-block; background-color:inherit">view
 plain</a><a target="_blank" title="copy" class="CopyToClipboard" href="http://blog.csdn.net/niu_gao/article/details/6921145#" rel="nofollow" target="_blank" style="margin:0px 10px 0px 0px; padding:1px; border:currentColor; width:16px; height:16px; color:rgb(160,160,160); text-indent:-2000px; font-size:9px; text-decoration:none; display:inline-block; background-color:inherit">copy</a>
<div style="left:531px; top:625px; width:18px; height:18px; position:absolute; z-index:99">
</div>
</div>
</div>
<ol class="dp-cpp" start="1" style="margin:0px 0px 1px 45px!important; padding:0px; border:currentColor; color:rgb(92,92,92); background-color:rgb(255,255,255)">
<li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit"><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">Boolean&nbsp;MediaSink::startPlaying(MediaSource&amp;&nbsp;source,&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;afterPlayingFunc*&nbsp;afterFunc,&nbsp;<span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">void</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">*&nbsp;afterClientData)&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">{&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//参数afterFunc是在播放结束时才被调用。</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;Make&nbsp;sure&nbsp;we're&nbsp;not&nbsp;already&nbsp;being&nbsp;played:</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;(fSource&nbsp;!=&nbsp;NULL)&nbsp;{&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;envir().setResultMsg(<span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">&quot;This&nbsp;sink&nbsp;is&nbsp;already&nbsp;being&nbsp;played&quot;</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">);&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">return</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;False;&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;Make&nbsp;sure&nbsp;our&nbsp;source&nbsp;is&nbsp;compatible:</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;(!sourceIsCompatibleWithUs(source))&nbsp;{&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;envir().setResultMsg(&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">&quot;MediaSink::startPlaying():&nbsp;source&nbsp;is&nbsp;not&nbsp;compatible!&quot;</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">);&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">return</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;False;&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//记下一些要使用的对象</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;fSource&nbsp;=&nbsp;(FramedSource*)&nbsp;&amp;source;&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;fAfterFunc&nbsp;=&nbsp;afterFunc;&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;fAfterClientData&nbsp;=&nbsp;afterClientData;&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">return</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;continuePlaying();&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">}&nbsp;&nbsp;</span></li></ol>
</div>
<p style="color:rgb(51,51,51); line-height:26px; font-family:Arial; font-size:14px">
为了进一步封装（让继承类少写一些代码），搞出了一个虚函数continuePlaying()。让我们来看一下：</p>
<div class="dp-highlighter bg_cpp" style="margin:18px 0px!important; width:687.04px; color:rgb(51,51,51); line-height:26px; overflow:auto; padding-top:1px; font-family:Consolas,'Courier New',Courier,mono,serif; background-color:rgb(231,229,220)">
<div class="bar" style="padding-left:45px">
<div class="tools" style="padding:3px 8px 10px 10px; color:silver; line-height:normal; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:9px; border-left-color:rgb(108,226,108); border-left-width:3px; border-left-style:solid; background-color:rgb(248,248,248)">
<strong>[cpp]</strong>&nbsp;<a target="_blank" title="view plain" class="ViewSource" href="http://blog.csdn.net/niu_gao/article/details/6921145#" rel="nofollow" target="_blank" style="margin:0px 10px 0px 0px; padding:1px; border:currentColor; width:16px; height:16px; color:rgb(160,160,160); text-indent:-2000px; font-size:9px; text-decoration:none; display:inline-block; background-color:inherit">view
 plain</a><a target="_blank" title="copy" class="CopyToClipboard" href="http://blog.csdn.net/niu_gao/article/details/6921145#" rel="nofollow" target="_blank" style="margin:0px 10px 0px 0px; padding:1px; border:currentColor; width:16px; height:16px; color:rgb(160,160,160); text-indent:-2000px; font-size:9px; text-decoration:none; display:inline-block; background-color:inherit">copy</a>
<div style="left:531px; top:1170px; width:18px; height:18px; position:absolute; z-index:99">
</div>
</div>
</div>
<ol class="dp-cpp" start="1" style="margin:0px 0px 1px 45px!important; padding:0px; border:currentColor; color:rgb(92,92,92); background-color:rgb(255,255,255)">
<li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit"><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">Boolean&nbsp;MultiFramedRTPSink::continuePlaying()&nbsp;{&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;Send&nbsp;the&nbsp;first&nbsp;packet.</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;(This&nbsp;will&nbsp;also&nbsp;schedule&nbsp;any&nbsp;future&nbsp;sends.)</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;buildAndSendPacket(True);&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">return</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;True;&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">}&nbsp;&nbsp;</span></li></ol>
</div>
<span style="font-family:Arial; font-size:14px; color:#333333; line-height:26px">MultiFramedRTPSink是与帧有关的类，其实它要求每次必须从source获得一个帧的数据，所以才叫这个name。可以看到continuePlaying()完全被buildAndSendPacket()代替。看一下buildAndSendPacket():</span><br style="color:rgb(51,51,51); line-height:26px; font-family:Arial; font-size:14px">
<div class="dp-highlighter bg_cpp" style="margin:18px 0px!important; width:687.04px; color:rgb(51,51,51); line-height:26px; overflow:auto; padding-top:1px; font-family:Consolas,'Courier New',Courier,mono,serif; background-color:rgb(231,229,220)">
<div class="bar" style="padding-left:45px">
<div class="tools" style="padding:3px 8px 10px 10px; color:silver; line-height:normal; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:9px; border-left-color:rgb(108,226,108); border-left-width:3px; border-left-style:solid; background-color:rgb(248,248,248)">
<strong>[cpp]</strong>&nbsp;<a target="_blank" title="view plain" class="ViewSource" href="http://blog.csdn.net/niu_gao/article/details/6921145#" rel="nofollow" target="_blank" style="margin:0px 10px 0px 0px; padding:1px; border:currentColor; width:16px; height:16px; color:rgb(160,160,160); text-indent:-2000px; font-size:9px; text-decoration:none; display:inline-block; background-color:inherit">view
 plain</a><a target="_blank" title="copy" class="CopyToClipboard" href="http://blog.csdn.net/niu_gao/article/details/6921145#" rel="nofollow" target="_blank" style="margin:0px 10px 0px 0px; padding:1px; border:currentColor; width:16px; height:16px; color:rgb(160,160,160); text-indent:-2000px; font-size:9px; text-decoration:none; display:inline-block; background-color:inherit">copy</a>
<div style="left:531px; top:1399px; width:18px; height:18px; position:absolute; z-index:99">
</div>
</div>
</div>
<ol class="dp-cpp" start="1" style="margin:0px 0px 1px 45px!important; padding:0px; border:currentColor; color:rgb(92,92,92); background-color:rgb(255,255,255)">
<li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit"><span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">void</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;MultiFramedRTPSink::buildAndSendPacket(Boolean&nbsp;isFirstPacket)&nbsp;&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">{&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//此函数中主要是准备rtp包的头，为一些需要跟据实际数据改变的字段留出位置。</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;fIsFirstPacket&nbsp;=&nbsp;isFirstPacket;&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;Set&nbsp;up&nbsp;the&nbsp;RTP&nbsp;header:</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;rtpHdr&nbsp;=&nbsp;0x80000000;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;RTP&nbsp;version&nbsp;2;&nbsp;marker&nbsp;('M')&nbsp;bit&nbsp;not&nbsp;set&nbsp;(by&nbsp;default;&nbsp;it&nbsp;can&nbsp;be&nbsp;set&nbsp;later)</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;rtpHdr&nbsp;|=&nbsp;(fRTPPayloadType&nbsp;&lt;&lt;&nbsp;16);&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;rtpHdr&nbsp;|=&nbsp;fSeqNo;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;sequence&nbsp;number</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;fOutBuf-&gt;enqueueWord(rtpHdr);<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//向包中加入一个字</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;Note&nbsp;where&nbsp;the&nbsp;RTP&nbsp;timestamp&nbsp;will&nbsp;go.</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;(We&nbsp;can't&nbsp;fill&nbsp;this&nbsp;in&nbsp;until&nbsp;we&nbsp;start&nbsp;packing&nbsp;payload&nbsp;frames.)</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;fTimestampPosition&nbsp;=&nbsp;fOutBuf-&gt;curPacketSize();&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;fOutBuf-&gt;skipBytes(4);&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;leave&nbsp;a&nbsp;hole&nbsp;for&nbsp;the&nbsp;timestamp　在缓冲中空出时间戳的位置</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;fOutBuf-&gt;enqueueWord(SSRC());&nbsp;&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;Allow&nbsp;for&nbsp;a&nbsp;special,&nbsp;payload-format-specific&nbsp;header&nbsp;following&nbsp;the</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;RTP&nbsp;header:</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;fSpecialHeaderPosition&nbsp;=&nbsp;fOutBuf-&gt;curPacketSize();&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;fSpecialHeaderSize&nbsp;=&nbsp;specialHeaderSize();&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;fOutBuf-&gt;skipBytes(fSpecialHeaderSize);&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;Begin&nbsp;packing&nbsp;as&nbsp;many&nbsp;(complete)&nbsp;frames&nbsp;into&nbsp;the&nbsp;packet&nbsp;as&nbsp;we&nbsp;can:</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;fTotalFrameSpecificHeaderSizes&nbsp;=&nbsp;0;&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;fNoFramesLeft&nbsp;=&nbsp;False;&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;fNumFramesUsedSoFar&nbsp;=&nbsp;0;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;一个包中已打入的帧数。</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//头准备好了，再打包帧数据</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;packFrame();&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">}&nbsp;&nbsp;</span></li></ol>
</div>
<span style="font-family:Arial; font-size:14px; color:#333333; line-height:26px">继续看packFrame()：</span><br style="color:rgb(51,51,51); line-height:26px; font-family:Arial; font-size:14px">
<div class="dp-highlighter bg_cpp" style="margin:18px 0px!important; width:687.04px; color:rgb(51,51,51); line-height:26px; overflow:auto; padding-top:1px; font-family:Consolas,'Courier New',Courier,mono,serif; background-color:rgb(231,229,220)">
<div class="bar" style="padding-left:45px">
<div class="tools" style="padding:3px 8px 10px 10px; color:silver; line-height:normal; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:9px; border-left-color:rgb(108,226,108); border-left-width:3px; border-left-style:solid; background-color:rgb(248,248,248)">
<strong>[cpp]</strong>&nbsp;<a target="_blank" title="view plain" class="ViewSource" href="http://blog.csdn.net/niu_gao/article/details/6921145#" rel="nofollow" target="_blank" style="margin:0px 10px 0px 0px; padding:1px; border:currentColor; width:16px; height:16px; color:rgb(160,160,160); text-indent:-2000px; font-size:9px; text-decoration:none; display:inline-block; background-color:inherit">view
 plain</a><a target="_blank" title="copy" class="CopyToClipboard" href="http://blog.csdn.net/niu_gao/article/details/6921145#" rel="nofollow" target="_blank" style="margin:0px 10px 0px 0px; padding:1px; border:currentColor; width:16px; height:16px; color:rgb(160,160,160); text-indent:-2000px; font-size:9px; text-decoration:none; display:inline-block; background-color:inherit">copy</a>
<div style="left:531px; top:2159px; width:18px; height:18px; position:absolute; z-index:99">
</div>
</div>
</div>
<ol class="dp-cpp" start="1" style="margin:0px 0px 1px 45px!important; padding:0px; border:currentColor; color:rgb(92,92,92); background-color:rgb(255,255,255)">
<li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit"><span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">void</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;MultiFramedRTPSink::packFrame()&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">{&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;First,&nbsp;see&nbsp;if&nbsp;we&nbsp;have&nbsp;an&nbsp;overflow&nbsp;frame&nbsp;that&nbsp;was&nbsp;too&nbsp;big&nbsp;for&nbsp;the&nbsp;last&nbsp;pkt</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;(fOutBuf-&gt;haveOverflowData())&nbsp;{&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//如果有帧数据，则使用之。OverflowData是指上次打包时剩下的帧数据，因为一个包可能容纳不了一个帧。</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;Use&nbsp;this&nbsp;frame&nbsp;before&nbsp;reading&nbsp;a&nbsp;new&nbsp;one&nbsp;from&nbsp;the&nbsp;source</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;frameSize&nbsp;=&nbsp;fOutBuf-&gt;overflowDataSize();&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">struct</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;timeval&nbsp;presentationTime&nbsp;=&nbsp;fOutBuf-&gt;overflowPresentationTime();&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;durationInMicroseconds&nbsp;=fOutBuf-&gt;overflowDurationInMicroseconds();&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fOutBuf-&gt;useOverflowData();&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;afterGettingFrame1(frameSize,&nbsp;0,&nbsp;presentationTime,durationInMicroseconds);&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">else</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;{&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//一点帧数据都没有，跟source要吧。</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;Normal&nbsp;case:&nbsp;we&nbsp;need&nbsp;to&nbsp;read&nbsp;a&nbsp;new&nbsp;frame&nbsp;from&nbsp;the&nbsp;source</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;(fSource&nbsp;==&nbsp;NULL)&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">return</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">;&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//更新缓冲中的一些位置</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fCurFrameSpecificHeaderPosition&nbsp;=&nbsp;fOutBuf-&gt;curPacketSize();&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fCurFrameSpecificHeaderSize&nbsp;=&nbsp;frameSpecificHeaderSize();&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fOutBuf-&gt;skipBytes(fCurFrameSpecificHeaderSize);&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fTotalFrameSpecificHeaderSizes&nbsp;&#43;=&nbsp;fCurFrameSpecificHeaderSize;&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//从source获取下一帧</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fSource-&gt;getNextFrame(fOutBuf-&gt;curPtr(),<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//新数据存放开始的位置</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fOutBuf-&gt;totalBytesAvailable(),<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//缓冲中空余的空间大小</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;afterGettingFrame,&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//因为可能source中的读数据函数会被放在任务调度中，所以把获取帧后应调用的函数传给source</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">this</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">,&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ourHandleClosure,&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//这个是source结束时(比如文件读完了)要调用的函数。</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">this</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">);&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">}&nbsp;&nbsp;</span></li></ol>
</div>
<span style="font-family:Arial; font-size:14px; color:#333333; line-height:26px">可以想像下面就是source从文件（或某个设备）中读取一帧数据，读完后返回给sink，当然不是从函数返回了，而是以调用afterGettingFrame这个回调函数的方式。所以下面看一下afterGettingFrame():</span><br style="color:rgb(51,51,51); line-height:26px; font-family:Arial; font-size:14px">
<div class="dp-highlighter bg_cpp" style="margin:18px 0px!important; width:687.04px; color:rgb(51,51,51); line-height:26px; overflow:auto; padding-top:1px; font-family:Consolas,'Courier New',Courier,mono,serif; background-color:rgb(231,229,220)">
<div class="bar" style="padding-left:45px">
<div class="tools" style="padding:3px 8px 10px 10px; color:silver; line-height:normal; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:9px; border-left-color:rgb(108,226,108); border-left-width:3px; border-left-style:solid; background-color:rgb(248,248,248)">
<strong>[cpp]</strong>&nbsp;<a target="_blank" title="view plain" class="ViewSource" href="http://blog.csdn.net/niu_gao/article/details/6921145#" rel="nofollow" target="_blank" style="margin:0px 10px 0px 0px; padding:1px; border:currentColor; width:16px; height:16px; color:rgb(160,160,160); text-indent:-2000px; font-size:9px; text-decoration:none; display:inline-block; background-color:inherit">view
 plain</a><a target="_blank" title="copy" class="CopyToClipboard" href="http://blog.csdn.net/niu_gao/article/details/6921145#" rel="nofollow" target="_blank" style="margin:0px 10px 0px 0px; padding:1px; border:currentColor; width:16px; height:16px; color:rgb(160,160,160); text-indent:-2000px; font-size:9px; text-decoration:none; display:inline-block; background-color:inherit">copy</a>
<div style="left:531px; top:2964px; width:18px; height:18px; position:absolute; z-index:99">
</div>
</div>
</div>
<ol class="dp-cpp" start="1" style="margin:0px 0px 1px 45px!important; padding:0px; border:currentColor; color:rgb(92,92,92); background-color:rgb(255,255,255)">
<li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit"><span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">void</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;MultiFramedRTPSink::afterGettingFrame(</span><span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">void</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">*&nbsp;clientData,&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;numBytesRead,&nbsp;unsigned&nbsp;numTruncatedBytes,&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">struct</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;timeval&nbsp;presentationTime,&nbsp;unsigned&nbsp;durationInMicroseconds)&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">{&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;MultiFramedRTPSink*&nbsp;sink&nbsp;=&nbsp;(MultiFramedRTPSink*)&nbsp;clientData;&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;sink-&gt;afterGettingFrame1(numBytesRead,&nbsp;numTruncatedBytes,&nbsp;presentationTime,&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;durationInMicroseconds);&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">}&nbsp;&nbsp;</span></li></ol>
</div>
<span style="font-family:Arial; font-size:14px; color:#333333; line-height:26px">没什么可看的，只是过度为调用成员函数，所以afterGettingFrame1()才是重点：</span><br style="color:rgb(51,51,51); line-height:26px; font-family:Arial; font-size:14px">
<div class="dp-highlighter bg_cpp" style="margin:18px 0px!important; width:687.04px; color:rgb(51,51,51); line-height:26px; overflow:auto; padding-top:1px; font-family:Consolas,'Courier New',Courier,mono,serif; background-color:rgb(231,229,220)">
<div class="bar" style="padding-left:45px">
<div class="tools" style="padding:3px 8px 10px 10px; color:silver; line-height:normal; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:9px; border-left-color:rgb(108,226,108); border-left-width:3px; border-left-style:solid; background-color:rgb(248,248,248)">
<strong>[cpp]</strong>&nbsp;<a target="_blank" title="view plain" class="ViewSource" href="http://blog.csdn.net/niu_gao/article/details/6921145#" rel="nofollow" target="_blank" style="margin:0px 10px 0px 0px; padding:1px; border:currentColor; width:16px; height:16px; color:rgb(160,160,160); text-indent:-2000px; font-size:9px; text-decoration:none; display:inline-block; background-color:inherit">view
 plain</a><a target="_blank" title="copy" class="CopyToClipboard" href="http://blog.csdn.net/niu_gao/article/details/6921145#" rel="nofollow" target="_blank" style="margin:0px 10px 0px 0px; padding:1px; border:currentColor; width:16px; height:16px; color:rgb(160,160,160); text-indent:-2000px; font-size:9px; text-decoration:none; display:inline-block; background-color:inherit">copy</a>
<div style="left:531px; top:3203px; width:18px; height:18px; position:absolute; z-index:99">
</div>
</div>
</div>
<ol class="dp-cpp" start="1" style="margin:0px 0px 1px 45px!important; padding:0px; border:currentColor; color:rgb(92,92,92); background-color:rgb(255,255,255)">
<li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit"><span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">void</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;MultiFramedRTPSink::afterGettingFrame1(&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;frameSize,&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;numTruncatedBytes,&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">struct</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;timeval&nbsp;presentationTime,&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;durationInMicroseconds)&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">{&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;(fIsFirstPacket)&nbsp;{&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;Record&nbsp;the&nbsp;fact&nbsp;that&nbsp;we're&nbsp;starting&nbsp;to&nbsp;play&nbsp;now:</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gettimeofday(&amp;fNextSendTime,&nbsp;NULL);&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//如果给予一帧的缓冲不够大，就会发生截断一帧数据的现象。但也只能提示一下用户</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;(numTruncatedBytes&nbsp;&gt;&nbsp;0)&nbsp;{&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;<span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">const</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;bufferSize&nbsp;=&nbsp;fOutBuf-&gt;totalBytesAvailable();&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;envir()&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;<span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">&quot;MultiFramedRTPSink::afterGettingFrame1():&nbsp;The&nbsp;input&nbsp;frame&nbsp;data&nbsp;was&nbsp;too&nbsp;large&nbsp;for&nbsp;our&nbsp;buffer&nbsp;size&nbsp;(&quot;</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;bufferSize&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;<span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">&quot;).&nbsp;&nbsp;&quot;</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;numTruncatedBytes&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;<span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">&quot;&nbsp;bytes&nbsp;of&nbsp;trailing&nbsp;data&nbsp;was&nbsp;dropped!&nbsp;&nbsp;Correct&nbsp;this&nbsp;by&nbsp;increasing&nbsp;\&quot;OutPacketBuffer::maxSize\&quot;&nbsp;to&nbsp;at&nbsp;least&nbsp;&quot;</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;OutPacketBuffer::maxSize&nbsp;&#43;&nbsp;numTruncatedBytes&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;<span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">&quot;,&nbsp;*before*&nbsp;creating&nbsp;this&nbsp;'RTPSink'.&nbsp;&nbsp;(Current&nbsp;value&nbsp;is&nbsp;&quot;</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;OutPacketBuffer::maxSize&nbsp;&lt;&lt;&nbsp;<span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">&quot;.)\n&quot;</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">;&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;curFragmentationOffset&nbsp;=&nbsp;fCurFragmentationOffset;&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;numFrameBytesToUse&nbsp;=&nbsp;frameSize;&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;overflowBytes&nbsp;=&nbsp;0;&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//如果包只已经打入帧数据了，并且不能再向这个包中加数据了，则把新获得的帧数据保存下来。</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;If&nbsp;we&nbsp;have&nbsp;already&nbsp;packed&nbsp;one&nbsp;or&nbsp;more&nbsp;frames&nbsp;into&nbsp;this&nbsp;packet,</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;check&nbsp;whether&nbsp;this&nbsp;new&nbsp;frame&nbsp;is&nbsp;eligible&nbsp;to&nbsp;be&nbsp;packed&nbsp;after&nbsp;them.</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;(This&nbsp;is&nbsp;independent&nbsp;of&nbsp;whether&nbsp;the&nbsp;packet&nbsp;has&nbsp;enough&nbsp;room&nbsp;for&nbsp;this</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;new&nbsp;frame;&nbsp;that&nbsp;check&nbsp;comes&nbsp;later.)</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;(fNumFramesUsedSoFar&nbsp;&gt;&nbsp;0)&nbsp;{&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//如果包中已有了一个帧，并且不允许再打入新的帧了，则只记录下新的帧。</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;((fPreviousFrameEndedFragmentation&nbsp;&amp;&amp;&nbsp;!allowOtherFramesAfterLastFragment())&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;||&nbsp;!frameCanAppearAfterPacketStart(fOutBuf-&gt;curPtr(),&nbsp;frameSize))&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;Save&nbsp;away&nbsp;this&nbsp;frame&nbsp;for&nbsp;next&nbsp;time:</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;numFrameBytesToUse&nbsp;=&nbsp;0;&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fOutBuf-&gt;setOverflowData(fOutBuf-&gt;curPacketSize(),&nbsp;frameSize,&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;presentationTime,&nbsp;durationInMicroseconds);&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//表示当前打入的是否是上一个帧的最后一块数据。</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;fPreviousFrameEndedFragmentation&nbsp;=&nbsp;False;&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//下面是计算获取的帧中有多少数据可以打到当前包中，剩下的数据就作为overflow数据保存下来。</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;(numFrameBytesToUse&nbsp;&gt;&nbsp;0)&nbsp;{&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;Check&nbsp;whether&nbsp;this&nbsp;frame&nbsp;overflows&nbsp;the&nbsp;packet</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;(fOutBuf-&gt;wouldOverflow(frameSize))&nbsp;{&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;Don't&nbsp;use&nbsp;this&nbsp;frame&nbsp;now;&nbsp;instead,&nbsp;save&nbsp;it&nbsp;as&nbsp;overflow&nbsp;data,&nbsp;and</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;send&nbsp;it&nbsp;in&nbsp;the&nbsp;next&nbsp;packet&nbsp;instead.&nbsp;&nbsp;However,&nbsp;if&nbsp;the&nbsp;frame&nbsp;is&nbsp;too</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;big&nbsp;to&nbsp;fit&nbsp;in&nbsp;a&nbsp;packet&nbsp;by&nbsp;itself,&nbsp;then&nbsp;we&nbsp;need&nbsp;to&nbsp;fragment&nbsp;it&nbsp;(and</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;use&nbsp;some&nbsp;of&nbsp;it&nbsp;in&nbsp;this&nbsp;packet,&nbsp;if&nbsp;the&nbsp;payload&nbsp;format&nbsp;permits&nbsp;this.)</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;(isTooBigForAPacket(frameSize)&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;(fNumFramesUsedSoFar&nbsp;==&nbsp;0&nbsp;||&nbsp;allowFragmentationAfterStart()))&nbsp;{&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;We&nbsp;need&nbsp;to&nbsp;fragment&nbsp;this&nbsp;frame,&nbsp;and&nbsp;use&nbsp;some&nbsp;of&nbsp;it&nbsp;now:</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;overflowBytes&nbsp;=&nbsp;computeOverflowForNewFrame(frameSize);&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;numFrameBytesToUse&nbsp;-=&nbsp;overflowBytes;&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fCurFragmentationOffset&nbsp;&#43;=&nbsp;numFrameBytesToUse;&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">else</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;{&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;We&nbsp;don't&nbsp;use&nbsp;any&nbsp;of&nbsp;this&nbsp;frame&nbsp;now:</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;overflowBytes&nbsp;=&nbsp;frameSize;&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;numFrameBytesToUse&nbsp;=&nbsp;0;&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fOutBuf-&gt;setOverflowData(fOutBuf-&gt;curPacketSize()&nbsp;&#43;&nbsp;numFrameBytesToUse,&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;overflowBytes,&nbsp;presentationTime,&nbsp;durationInMicroseconds);&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">else</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;</span><span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;(fCurFragmentationOffset&nbsp;&gt;&nbsp;0)&nbsp;{&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;This&nbsp;is&nbsp;the&nbsp;last&nbsp;fragment&nbsp;of&nbsp;a&nbsp;frame&nbsp;that&nbsp;was&nbsp;fragmented&nbsp;over</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;more&nbsp;than&nbsp;one&nbsp;packet.&nbsp;&nbsp;Do&nbsp;any&nbsp;special&nbsp;handling&nbsp;for&nbsp;this&nbsp;case:</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fCurFragmentationOffset&nbsp;=&nbsp;0;&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fPreviousFrameEndedFragmentation&nbsp;=&nbsp;True;&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;(numFrameBytesToUse&nbsp;==&nbsp;0&nbsp;&amp;&amp;&nbsp;frameSize&nbsp;&gt;&nbsp;0)&nbsp;{&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//如果包中有数据并且没有新数据了，则发送之。（这种情况好像很难发生啊！）</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;Send&nbsp;our&nbsp;packet&nbsp;now,&nbsp;because&nbsp;we&nbsp;have&nbsp;filled&nbsp;it&nbsp;up:</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sendPacketIfNecessary();&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">else</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;{&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//需要向包中打入数据。</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;Use&nbsp;this&nbsp;frame&nbsp;in&nbsp;our&nbsp;outgoing&nbsp;packet:</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;<span class="datatypes" style="color:#2e8b57; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">char</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">*&nbsp;frameStart&nbsp;=&nbsp;fOutBuf-&gt;curPtr();&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fOutBuf-&gt;increment(numFrameBytesToUse);&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;do&nbsp;this&nbsp;now,&nbsp;in&nbsp;case&nbsp;&quot;doSpecialFrameHandling()&quot;&nbsp;calls&nbsp;&quot;setFramePadding()&quot;&nbsp;to&nbsp;append&nbsp;padding&nbsp;bytes</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;Here's&nbsp;where&nbsp;any&nbsp;payload&nbsp;format&nbsp;specific&nbsp;processing&nbsp;gets&nbsp;done:</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;doSpecialFrameHandling(curFragmentationOffset,&nbsp;frameStart,&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;numFrameBytesToUse,&nbsp;presentationTime,&nbsp;overflowBytes);&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#43;&#43;fNumFramesUsedSoFar;&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;Update&nbsp;the&nbsp;time&nbsp;at&nbsp;which&nbsp;the&nbsp;next&nbsp;packet&nbsp;should&nbsp;be&nbsp;sent,&nbsp;based</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;on&nbsp;the&nbsp;duration&nbsp;of&nbsp;the&nbsp;frame&nbsp;that&nbsp;we&nbsp;just&nbsp;packed&nbsp;into&nbsp;it.</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;However,&nbsp;if&nbsp;this&nbsp;frame&nbsp;has&nbsp;overflow&nbsp;data&nbsp;remaining,&nbsp;then&nbsp;don't</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;count&nbsp;its&nbsp;duration&nbsp;yet.</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;(overflowBytes&nbsp;==&nbsp;0)&nbsp;{&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fNextSendTime.tv_usec&nbsp;&#43;=&nbsp;durationInMicroseconds;&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fNextSendTime.tv_sec&nbsp;&#43;=&nbsp;fNextSendTime.tv_usec&nbsp;/&nbsp;1000000;&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fNextSendTime.tv_usec&nbsp;%=&nbsp;1000000;&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//如果需要，就发出包，否则继续打入数据。</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;Send&nbsp;our&nbsp;packet&nbsp;now&nbsp;if&nbsp;(i)&nbsp;it's&nbsp;already&nbsp;at&nbsp;our&nbsp;preferred&nbsp;size,&nbsp;or</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;(ii)&nbsp;(heuristic)&nbsp;another&nbsp;frame&nbsp;of&nbsp;the&nbsp;same&nbsp;size&nbsp;as&nbsp;the&nbsp;one&nbsp;we&nbsp;just</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;read&nbsp;would&nbsp;overflow&nbsp;the&nbsp;packet,&nbsp;or</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;(iii)&nbsp;it&nbsp;contains&nbsp;the&nbsp;last&nbsp;fragment&nbsp;of&nbsp;a&nbsp;fragmented&nbsp;frame,&nbsp;and&nbsp;we</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;don't&nbsp;allow&nbsp;anything&nbsp;else&nbsp;to&nbsp;follow&nbsp;this&nbsp;or</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;(iv)&nbsp;one&nbsp;frame&nbsp;per&nbsp;packet&nbsp;is&nbsp;allowed:</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;(fOutBuf-&gt;isPreferredSize()&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;||&nbsp;fOutBuf-&gt;wouldOverflow(numFrameBytesToUse)&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;||&nbsp;(fPreviousFrameEndedFragmentation&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;!allowOtherFramesAfterLastFragment())&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;||&nbsp;!frameCanAppearAfterPacketStart(&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fOutBuf-&gt;curPtr()&nbsp;-&nbsp;frameSize,&nbsp;frameSize))&nbsp;{&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;The&nbsp;packet&nbsp;is&nbsp;ready&nbsp;to&nbsp;be&nbsp;sent&nbsp;now</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sendPacketIfNecessary();&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">else</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;{&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;There's&nbsp;room&nbsp;for&nbsp;more&nbsp;frames;&nbsp;try&nbsp;getting&nbsp;another:</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;packFrame();&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">}&nbsp;&nbsp;</span></li></ol>
</div>
<br style="color:rgb(51,51,51); line-height:26px; font-family:Arial; font-size:14px">
<span style="font-family:Arial; font-size:14px; color:#333333; line-height:26px">看一下发送数据的函数：</span><br style="color:rgb(51,51,51); line-height:26px; font-family:Arial; font-size:14px">
<div class="dp-highlighter bg_cpp" style="margin:18px 0px!important; width:687.04px; color:rgb(51,51,51); line-height:26px; overflow:auto; padding-top:1px; font-family:Consolas,'Courier New',Courier,mono,serif; background-color:rgb(231,229,220)">
<div class="bar" style="padding-left:45px">
<div class="tools" style="padding:3px 8px 10px 10px; color:silver; line-height:normal; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:9px; border-left-color:rgb(108,226,108); border-left-width:3px; border-left-style:solid; background-color:rgb(248,248,248)">
<strong>[cpp]</strong>&nbsp;<a target="_blank" title="view plain" class="ViewSource" href="http://blog.csdn.net/niu_gao/article/details/6921145#" rel="nofollow" target="_blank" style="margin:0px 10px 0px 0px; padding:1px; border:currentColor; width:16px; height:16px; color:rgb(160,160,160); text-indent:-2000px; font-size:9px; text-decoration:none; display:inline-block; background-color:inherit">view
 plain</a><a target="_blank" title="copy" class="CopyToClipboard" href="http://blog.csdn.net/niu_gao/article/details/6921145#" rel="nofollow" target="_blank" style="margin:0px 10px 0px 0px; padding:1px; border:currentColor; width:16px; height:16px; color:rgb(160,160,160); text-indent:-2000px; font-size:9px; text-decoration:none; display:inline-block; background-color:inherit">copy</a>
<div style="left:531px; top:5807px; width:18px; height:18px; position:absolute; z-index:99">
</div>
</div>
</div>
<ol class="dp-cpp" start="1" style="margin:0px 0px 1px 45px!important; padding:0px; border:currentColor; color:rgb(92,92,92); background-color:rgb(255,255,255)">
<li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit"><span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">void</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;MultiFramedRTPSink::sendPacketIfNecessary()&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">{&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//发送包</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;(fNumFramesUsedSoFar&nbsp;&gt;&nbsp;0)&nbsp;{&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;Send&nbsp;the&nbsp;packet:</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit"><span class="preprocessor" style="color:gray; margin:0px; padding:0px; border:currentColor; background-color:inherit">#ifdef&nbsp;TEST_LOSS</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;((our_random()%10)&nbsp;!=&nbsp;0)&nbsp;</span><span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;simulate&nbsp;10%&nbsp;packet&nbsp;loss&nbsp;#####</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit"><span class="preprocessor" style="color:gray; margin:0px; padding:0px; border:currentColor; background-color:inherit">#endif</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;(!fRTPInterface.sendPacket(fOutBuf-&gt;packet(),fOutBuf-&gt;curPacketSize()))&nbsp;{&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;if&nbsp;failure&nbsp;handler&nbsp;has&nbsp;been&nbsp;specified,&nbsp;call&nbsp;it</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;(fOnSendErrorFunc&nbsp;!=&nbsp;NULL)&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(*fOnSendErrorFunc)(fOnSendErrorData);&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#43;&#43;fPacketCount;&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fTotalOctetCount&nbsp;&#43;=&nbsp;fOutBuf-&gt;curPacketSize();&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fOctetCount&nbsp;&#43;=&nbsp;fOutBuf-&gt;curPacketSize()&nbsp;-&nbsp;rtpHeaderSize&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;fSpecialHeaderSize&nbsp;-&nbsp;fTotalFrameSpecificHeaderSizes;&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#43;&#43;fSeqNo;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;for&nbsp;next&nbsp;time</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//如果还有剩余数据，则调整缓冲区</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;(fOutBuf-&gt;haveOverflowData()&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;fOutBuf-&gt;totalBytesAvailable()&nbsp;&gt;&nbsp;fOutBuf-&gt;totalBufferSize()&nbsp;/&nbsp;2)&nbsp;{&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;Efficiency&nbsp;hack:&nbsp;Reset&nbsp;the&nbsp;packet&nbsp;start&nbsp;pointer&nbsp;to&nbsp;just&nbsp;in&nbsp;front&nbsp;of</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;the&nbsp;overflow&nbsp;data&nbsp;(allowing&nbsp;for&nbsp;the&nbsp;RTP&nbsp;header&nbsp;and&nbsp;special&nbsp;headers),</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;so&nbsp;that&nbsp;we&nbsp;probably&nbsp;don't&nbsp;have&nbsp;to&nbsp;&quot;memmove()&quot;&nbsp;the&nbsp;overflow&nbsp;data</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;into&nbsp;place&nbsp;when&nbsp;building&nbsp;the&nbsp;next&nbsp;packet:</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;newPacketStart&nbsp;=&nbsp;fOutBuf-&gt;curPacketSize()-&nbsp;&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(rtpHeaderSize&nbsp;&#43;&nbsp;fSpecialHeaderSize&nbsp;&#43;&nbsp;frameSpecificHeaderSize());&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fOutBuf-&gt;adjustPacketStart(newPacketStart);&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">else</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;{&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;Normal&nbsp;case:&nbsp;Reset&nbsp;the&nbsp;packet&nbsp;start&nbsp;pointer&nbsp;back&nbsp;to&nbsp;the&nbsp;start:</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fOutBuf-&gt;resetPacketStart();&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;fOutBuf-&gt;resetOffset();&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;fNumFramesUsedSoFar&nbsp;=&nbsp;0;&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;(fNoFramesLeft)&nbsp;{&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//如果再没有数据了，则结束之</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;We're&nbsp;done:</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onSourceClosure(<span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">this</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">);&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">else</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;{&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//如果还有数据，则在下一次需要发送的时间再次打包发送。</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;We&nbsp;have&nbsp;more&nbsp;frames&nbsp;left&nbsp;to&nbsp;send.&nbsp;&nbsp;Figure&nbsp;out&nbsp;when&nbsp;the&nbsp;next&nbsp;frame</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;is&nbsp;due&nbsp;to&nbsp;start&nbsp;playing,&nbsp;then&nbsp;make&nbsp;sure&nbsp;that&nbsp;we&nbsp;wait&nbsp;this&nbsp;long&nbsp;before</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;sending&nbsp;the&nbsp;next&nbsp;packet.</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">struct</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;timeval&nbsp;timeNow;&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gettimeofday(&amp;timeNow,&nbsp;NULL);&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="datatypes" style="color:#2e8b57; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">int</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;secsDiff&nbsp;=&nbsp;fNextSendTime.tv_sec&nbsp;-&nbsp;timeNow.tv_sec;&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int64_t&nbsp;uSecondsToGo&nbsp;=&nbsp;secsDiff&nbsp;*&nbsp;1000000&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#43;&nbsp;(fNextSendTime.tv_usec&nbsp;-&nbsp;timeNow.tv_usec);&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;(uSecondsToGo&nbsp;&lt;&nbsp;0&nbsp;||&nbsp;secsDiff&nbsp;&lt;&nbsp;0)&nbsp;{&nbsp;</span><span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;sanity&nbsp;check:&nbsp;Make&nbsp;sure&nbsp;that&nbsp;the&nbsp;time-to-delay&nbsp;is&nbsp;non-negative:</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uSecondsToGo&nbsp;=&nbsp;0;&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color:#0820; margin:0px; padding:0px; border:currentColor; background-color:inherit">//&nbsp;Delay&nbsp;this&nbsp;amount&nbsp;of&nbsp;time:</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nextTask()&nbsp;=&nbsp;envir().taskScheduler().scheduleDelayedTask(uSecondsToGo,&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(TaskFunc*)&nbsp;sendNext,&nbsp;<span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">this</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">);&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">}&nbsp;&nbsp;</span></li></ol>
</div>
<br style="color:rgb(51,51,51); line-height:26px; font-family:Arial; font-size:14px">
<span style="font-family:Arial; font-size:14px; color:#333333; line-height:26px">可以看到为了延迟包的发送，使用了delay task来执行下次打包发送任务。</span><br style="color:rgb(51,51,51); line-height:26px; font-family:Arial; font-size:14px">
<p style="color:rgb(51,51,51); line-height:26px; font-family:Arial; font-size:14px">
sendNext()中又调用了buildAndSendPacket()函数，呵呵，又是一个圈圈。</p>
<p style="color:rgb(51,51,51); line-height:26px; font-family:Arial; font-size:14px">
总结一下调用过程：</p>
<p style="color:rgb(51,51,51); line-height:26px; font-family:Arial; font-size:14px">
<img alt="" src="https://img-blog.csdn.net/20130920171528156?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGVpeGlhb2h1YTEwMjA=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center"><br>
</p>
<p style="color:rgb(51,51,51); line-height:26px; font-family:Arial; font-size:14px">
最后，再说明一下包缓冲区的使用：</p>
<p style="color:rgb(51,51,51); line-height:26px; font-family:Arial; font-size:14px">
MultiFramedRTPSink中的帧数据和包缓冲区共用一个，只是用一些额外的变量指明缓冲区中属于包的部分以及属于帧数据的部分（包以外的数据叫做overflow data）。它有时会把overflow data以mem move的方式移到包开始的位置，有时把包的开始位置直接设置到overflow data开始的地方。那么这个缓冲的大小是怎样确定的呢？是跟据调用者指定的的一个最大的包的大小&#43;60000算出的。这个地方把我搞胡涂了：如果一次从source获取一个帧的话，那这个缓冲应设为不小于最大的一个帧的大小才是，为何是按包的大小设置呢？可以看到，当缓冲不够时只是提示一下：</p>
<div class="dp-highlighter bg_cpp" style="margin:18px 0px!important; width:687.04px; color:rgb(51,51,51); line-height:26px; overflow:auto; padding-top:1px; font-family:Consolas,'Courier New',Courier,mono,serif; background-color:rgb(231,229,220)">
<div class="bar" style="padding-left:45px">
<div class="tools" style="padding:3px 8px 10px 10px; color:silver; line-height:normal; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:9px; border-left-color:rgb(108,226,108); border-left-width:3px; border-left-style:solid; background-color:rgb(248,248,248)">
<strong>[cpp]</strong>&nbsp;<a target="_blank" title="view plain" class="ViewSource" href="http://blog.csdn.net/niu_gao/article/details/6921145#" rel="nofollow" target="_blank" style="margin:0px 10px 0px 0px; padding:1px; border:currentColor; width:16px; height:16px; color:rgb(160,160,160); text-indent:-2000px; font-size:9px; text-decoration:none; display:inline-block; background-color:inherit">view
 plain</a><a target="_blank" title="copy" class="CopyToClipboard" href="http://blog.csdn.net/niu_gao/article/details/6921145#" rel="nofollow" target="_blank" style="margin:0px 10px 0px 0px; padding:1px; border:currentColor; width:16px; height:16px; color:rgb(160,160,160); text-indent:-2000px; font-size:9px; text-decoration:none; display:inline-block; background-color:inherit">copy</a>
<div style="left:531px; top:7460px; width:18px; height:18px; position:absolute; z-index:99">
</div>
</div>
</div>
<ol class="dp-cpp" start="1" style="margin:0px 0px 1px 45px!important; padding:0px; border:currentColor; color:rgb(92,92,92); background-color:rgb(255,255,255)">
<li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit"><span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">if</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;(numTruncatedBytes&nbsp;&gt;&nbsp;0)&nbsp;{&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;<span class="keyword" style="color:#06699; margin:0px; padding:0px; border:currentColor; font-weight:bold; background-color:inherit">const</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;bufferSize&nbsp;=&nbsp;fOutBuf-&gt;totalBytesAvailable();&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;envir()&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;<span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">&quot;MultiFramedRTPSink::afterGettingFrame1():&nbsp;The&nbsp;input&nbsp;frame&nbsp;data&nbsp;was&nbsp;too&nbsp;large&nbsp;for&nbsp;our&nbsp;buffer&nbsp;size&nbsp;(&quot;</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;bufferSize&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;<span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">&quot;).&nbsp;&nbsp;&quot;</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;numTruncatedBytes&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;<span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">&quot;&nbsp;bytes&nbsp;of&nbsp;trailing&nbsp;data&nbsp;was&nbsp;dropped!&nbsp;&nbsp;Correct&nbsp;this&nbsp;by&nbsp;increasing&nbsp;\&quot;OutPacketBuffer::maxSize\&quot;&nbsp;to&nbsp;at&nbsp;least&nbsp;&quot;</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;OutPacketBuffer::maxSize&nbsp;&#43;&nbsp;numTruncatedBytes&nbsp;&nbsp;</span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;<span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">&quot;,&nbsp;*before*&nbsp;creating&nbsp;this&nbsp;'RTPSink'.&nbsp;&nbsp;(Current&nbsp;value&nbsp;is&nbsp;&quot;</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;</span></span></li><li class="alt" style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; color:inherit; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;OutPacketBuffer::maxSize&nbsp;&lt;&lt;&nbsp;<span class="string" style="color:blue; margin:0px; padding:0px; border:currentColor; background-color:inherit">&quot;.)\n&quot;</span><span style="margin:0px; padding:0px; border:currentColor; background-color:inherit">;&nbsp;&nbsp;</span></span></li><li style="border-style:none none none solid; list-style:decimal-leading-zero; margin:0px!important; padding:0px 3px 0px 10px!important; line-height:18px; border-left-color:rgb(108,226,108); border-left-width:3px; background-color:rgb(248,248,248)">
<span style="color:black; margin:0px; padding:0px; border:currentColor; background-color:inherit">}&nbsp;&nbsp;</span></li></ol>
</div>
<p><span style="font-family:Arial; font-size:14px; color:#333333; line-height:26px">当然此时不会出错，但有可能导致时间戳计算不准，或增加时间戳计算与source端处理的复杂性(因为一次取一帧时间戳是很好计算的)。</span></p>
<p><span style="font-family:Arial; font-size:14px; color:#333333; line-height:26px"><br>
</span></p>
<p><span style="font-family:Arial; font-size:14px; color:#333333; line-height:26px">原文地址：<a target="_blank" href="http://blog.csdn.net/niu_gao/article/details/6921145" rel="nofollow" target="_blank">http://blog.csdn.net/niu_gao/article/details/6921145</a></span></p>
<p><span style="font-family:Arial; font-size:14px; color:#333333; line-height:26px">live555源代码（VC6）：</span><a target="_blank" href="http://download.csdn.net/detail/leixiaohua1020/6374387" rel="nofollow" target="_blank" style="color:rgb(51,102,153); line-height:26px; font-family:Arial; font-size:14px; text-decoration:none">http://download.csdn.net/detail/leixiaohua1020/6374387</a><br>
</p>
            </div>
                </div>
				<div style="display:none;" class="hide-article-box text-center csdn-tracking-statistics tracking-click" data-mod="popu_376">
			<a class="btn btn-red-hollow" id="btn-readmore">阅读更多</a>
		</div>
        	</article>
	
		<div class="article-bar-bottom">
						<div class="tags-box artic-tag-box">
			<span class="label">文章标签：</span>
						<a class="tag-link" href="http://so.csdn.net/so/search/s.do?q=live555&t=blog" target="_blank">live555						<a class="tag-link" href="http://so.csdn.net/so/search/s.do?q=rtp&t=blog" target="_blank">rtp						<a class="tag-link" href="http://so.csdn.net/so/search/s.do?q=源代码&t=blog" target="_blank">源代码						</a>
		</div>
						<div class="tags-box">
			<span class="label">个人分类：</span>
						<a class="tag-link" href="https://blog.csdn.net/leixiaohua1020/article/category/1362936"  target="_blank">Live555						</a>
		</div>
						<div class="tags-box">
			<span class="label">所属专栏：</span>
						<a class="tag-link" href="https://blog.csdn.net/column/details/osmedia.html" target="_blank">开源多媒体项目源代码分析</a>
						</a>
		</div>
			</div>
	
	<!-- !empty($pre_next_article[0]) -->
		</div>
<script>
    $(".MathJax").remove();
</script>

<script type="text/javascript" src="https://static-blog.csdn.net/mdeditor/public/res/bower-libs/MathJax/MathJax@js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
			"HTML-CSS": {
					linebreaks: { automatic: true, width: "94%container" },
					imageFont: null
			},
			tex2jax: {
				preview: "none"
			},
			mml2jax: {
				preview: 'none'
			}
	});
</script>
<script>
	(function(){
		var btnReadmore = $("#btn-readmore");
		if(btnReadmore.length>0){
			var winH = $(window).height();
			var articleBox = $("div.article_content");
			var artH = articleBox.height();
			if(artH > winH*2){
				articleBox.css({
					'height':winH*2+'px',
					'overflow':'hidden'
				})
				btnReadmore.click(function(){
					articleBox.removeAttr("style");
					$(this).parent().remove();
				})
			}else{
				btnReadmore.parent().remove();
			}
		}
	})()
</script>        <div class="edu-promotion"></div>
<script type="text/javascript">
	var edu_ad_is_big_data = 0;
	var edu_ad_id_mapping = {"0":["https:\/\/edu.csdn.net\/sp\/blog.php?type=ai1","https:\/\/edu.csdn.net\/sp\/blog.php?type=python1","https:\/\/edu.csdn.net\/sp\/blog.php?type=618"],"1":["https:\/\/edu.csdn.net\/sp\/blog.php?type=bigdata1","https:\/\/edu.csdn.net\/sp\/blog.php?type=web1","https:\/\/edu.csdn.net\/sp\/blog.php?type=gcit","https:\/\/edu.csdn.net\/sp\/blog.php?type=web1","https:\/\/edu.csdn.net\/sp\/blog.php?type=web1","https:\/\/edu.csdn.net\/sp\/blog.php?type=bigdata1","https:\/\/edu.csdn.net\/sp\/blog.php?type=bigdata1","https:\/\/edu.csdn.net\/sp\/blog.php?type=618"],"8":["https:\/\/edu.csdn.net\/sp\/blog.php?type=bigdata1","https:\/\/edu.csdn.net\/sp\/blog.php?type=gcit"],"2":["https:\/\/edu.csdn.net\/sp\/blog.php?type=bigdata1","https:\/\/edu.csdn.net\/sp\/blog.php?type=python1"],"3":["https:\/\/edu.csdn.net\/sp\/blog.php?type=ai1","https:\/\/edu.csdn.net\/sp\/blog.php?type=bigdata1","https:\/\/edu.csdn.net\/sp\/blog.php?type=gcit","https:\/\/edu.csdn.net\/sp\/blog.php?type=ai1","https:\/\/edu.csdn.net\/sp\/blog.php?type=bigdata1","https:\/\/edu.csdn.net\/sp\/blog.php?type=bigdata1","https:\/\/edu.csdn.net\/sp\/blog.php?type=ai1","https:\/\/edu.csdn.net\/sp\/blog.php?type=618"],"6":["https:\/\/edu.csdn.net\/sp\/blog.php?type=bigdata1","https:\/\/edu.csdn.net\/sp\/blog.php?type=ai1","https:\/\/edu.csdn.net\/sp\/blog.php?type=gcit"],"12":["https:\/\/edu.csdn.net\/sp\/blog.php?type=bigdata1","https:\/\/edu.csdn.net\/sp\/blog.php?type=ai1","https:\/\/edu.csdn.net\/sp\/blog.php?type=gcit"],"14":["https:\/\/edu.csdn.net\/sp\/blog.php?type=web1","https:\/\/edu.csdn.net\/sp\/blog.php?type=python1","https:\/\/edu.csdn.net\/sp\/blog.php?type=gcweb","https:\/\/edu.csdn.net\/sp\/blog.php?type=ai1","https:\/\/edu.csdn.net\/sp\/blog.php?type=web1","https:\/\/edu.csdn.net\/sp\/blog.php?type=618"],"15":["https:\/\/edu.csdn.net\/sp\/blog.php?type=ai1","https:\/\/edu.csdn.net\/sp\/blog.php?type=bigdata1","https:\/\/edu.csdn.net\/sp\/blog.php?type=gcjg","https:\/\/edu.csdn.net\/sp\/blog.php?type=ai1","https:\/\/edu.csdn.net\/sp\/blog.php?type=bigdata1"],"16":["https:\/\/edu.csdn.net\/sp\/blog.php?type=web1","https:\/\/edu.csdn.net\/sp\/blog.php?type=python1"],"28":["https:\/\/edu.csdn.net\/sp\/blog.php?type=ai1","https:\/\/edu.csdn.net\/sp\/blog.php?type=python1","https:\/\/edu.csdn.net\/sp\/blog.php?type=gcai","https:\/\/edu.csdn.net\/sp\/blog.php?type=ai1","https:\/\/edu.csdn.net\/sp\/blog.php?type=python1","https:\/\/edu.csdn.net\/sp\/blog.php?type=618"],"29":["https:\/\/edu.csdn.net\/sp\/blog.php?type=bigdata1","https:\/\/edu.csdn.net\/sp\/blog.php?type=ai1"],"30":["https:\/\/edu.csdn.net\/sp\/blog.php?type=python1","https:\/\/edu.csdn.net\/sp\/blog.php?type=ai1"],"32":["https:\/\/edu.csdn.net\/sp\/blog.php?type=bigdata1","https:\/\/edu.csdn.net\/sp\/blog.php?type=python1","https:\/\/edu.csdn.net\/sp\/blog.php?type=gcaq"],"33":["https:\/\/edu.csdn.net\/sp\/blog.php?type=bigdata1","https:\/\/edu.csdn.net\/sp\/blog.php?type=ai1","https:\/\/edu.csdn.net\/sp\/blog.php?type=gccxrs","https:\/\/edu.csdn.net\/sp\/blog.php?type=python1","https:\/\/edu.csdn.net\/sp\/blog.php?type=bigdata1"],"35":["https:\/\/edu.csdn.net\/sp\/blog.php?type=ai1","https:\/\/edu.csdn.net\/sp\/blog.php?type=bigdata1","https:\/\/edu.csdn.net\/sp\/blog.php?type=gcit"],"37":["https:\/\/edu.csdn.net\/sp\/blog.php?type=web1","https:\/\/edu.csdn.net\/sp\/blog.php?type=python1"],"7":["https:\/\/edu.csdn.net\/sp\/blog.php?type=bigdata1","https:\/\/edu.csdn.net\/sp\/blog.php?type=web1","https:\/\/edu.csdn.net\/sp\/blog.php?type=gcit","https:\/\/edu.csdn.net\/sp\/blog.php?type=bigdata1","https:\/\/edu.csdn.net\/sp\/blog.php?type=bigdata1","https:\/\/edu.csdn.net\/sp\/blog.php?type=web1","https:\/\/edu.csdn.net\/sp\/blog.php?type=web1","https:\/\/edu.csdn.net\/sp\/blog.php?type=618"],"17":["https:\/\/edu.csdn.net\/sp\/blog.php?type=bigdata1","https:\/\/edu.csdn.net\/sp\/blog.php?type=ai1"],"34":["https:\/\/edu.csdn.net\/sp\/blog.php?type=bigdata1","https:\/\/edu.csdn.net\/sp\/blog.php?type=python1","https:\/\/edu.csdn.net\/sp\/blog.php?type=gcbt"],"36":["https:\/\/edu.csdn.net\/sp\/blog.php?type=bigdata1","https:\/\/edu.csdn.net\/sp\/blog.php?type=ai1","https:\/\/edu.csdn.net\/sp\/blog.php?type=gcit"],"31":["https:\/\/edu.csdn.net\/sp\/blog.php?type=python1","https:\/\/edu.csdn.net\/sp\/blog.php?type=bigdata1","https:\/\/edu.csdn.net\/sp\/blog.php?type=gcit"],"19":["https:\/\/edu.csdn.net\/sp\/blog.php?type=bigdata1","https:\/\/edu.csdn.net\/sp\/blog.php?type=gcit"],"20":["https:\/\/edu.csdn.net\/sp\/blog.php?type=bigdata1","https:\/\/edu.csdn.net\/sp\/blog.php?type=gcit"]};
</script>        <a id="commentBox"></a>
<div class="comment-box" style="display:none;">
	  	<div class="unlogin-box text-center">
		想对作者说点什么？
		<!-- $curl 当前地址 -->
		<a href="https://passport.csdn.net/account/login?from=https://blog.csdn.net/leixiaohua1020/article/details/11850969#commentBox" class="btn btn-sm btn-red">我来说一句</a>
	</div>
			<div class="comment-list-container">
		<a id="comments"></a>
		<div class="comment-list-box">
		</div>
		<div id="commentPage" class="pagination-box d-none"></div>
		<div class="opt-box text-center">
			<button class="btn btn-sm btn-link-blue" id="btnMoreComment"></button>
		</div>
	</div>
</div>        <div class="recommend-box" style="display:none;">
            		<div class="recommend-item-box csdn-tracking-statistics" data-mod="popu_387" data-poputype="feed"  data-feed-show="false"  data-dsm="post">
		<h4 class="text-truncate">
			<a href="https://blog.csdn.net/gavinr/article/details/7035799" target="_blank" strategy="BlogCommendFromBaidu_0">
				<em>live555</em>源码分析----<em>RTP</em>的<em>打包</em>与<em>发送</em>			</a>
		</h4>
		<p class="content">
			<a href="https://blog.csdn.net/gavinr/article/details/7035799" target="_blank" >
				这里主要分析一下，<em>live555</em>中关于<em>RTP</em><em>打包</em><em>发送</em>的部分。在处理完PLAY命令之后，就开始<em>发送</em><em>RTP</em>数据包了(其实在<em>发送</em>PLAY命令的response包之前，就会<em>发送</em>一个<em>RTP</em>包，这里传输就已经开始...			</a>
		</p>
		<div class="info-box d-flex align-content-center">
			<p>
				<a class="avatar" src="https://blog.csdn.net/gavinr" title="gavinr" target="_blank">
					<img src="https://avatar.csdn.net/F/0/2/3_gavinr.jpg" alt="gavinr" class="avatar-pic">
					<span class="name">gavinr</span>
				</a>
			</p>
			<p>
				<span class="date">2011-12-02 17:10:37</span>
			</p>
			<p>
				<span class="read-num">阅读数：18530</span>
			</p>
		</div>
	</div>
					<div class="recommend-item-box csdn-tracking-statistics" data-mod="popu_387" data-poputype="feed"  data-feed-show="false"  data-dsm="post">
		<h4 class="text-truncate">
			<a href="https://blog.csdn.net/ithzhang/article/details/38902825" target="_blank" strategy="BlogCommendFromBaidu_1">
				<em>LIVE555</em>研究之五：<em>RTP</em>Server（二）			</a>
		</h4>
		<p class="content">
			<a href="https://blog.csdn.net/ithzhang/article/details/38902825" target="_blank" >
				<em>LIVE555</em>研究之五：<em>RTP</em>Server（二）      接上文，main函数的几行代码创建了RTSPServer类的子类DynamicRTSPServer对象。<em>RTP</em>Server类是服务器类的基类...			</a>
		</p>
		<div class="info-box d-flex align-content-center">
			<p>
				<a class="avatar" src="https://blog.csdn.net/ithzhang" title="ithzhang" target="_blank">
					<img src="https://avatar.csdn.net/8/1/1/3_ithzhang.jpg" alt="ithzhang" class="avatar-pic">
					<span class="name">ithzhang</span>
				</a>
			</p>
			<p>
				<span class="date">2014-08-28 20:17:40</span>
			</p>
			<p>
				<span class="read-num">阅读数：7006</span>
			</p>
		</div>
	</div>
								<div class="recommend-item-box recommend-ad-box" id="ad1"></div>
				<script>
				  var width = $("div.recommend-box").outerWidth() - 48;
					NEWS_FEED({
						w: width,
						h : 90,
						showid : 'GNKXx7',
						placeholderId: "ad1",
						inject : 'define',
						define : {
							imagePosition : 'right',
							imageBorderRadius : 0,
							imageWidth: 120,
							imageHeight: 90,
							imageFill : 'clip',
							displayImage : true,
							displayTitle : true,
							titleFontSize: 20,
							titleFontColor: '#333',
							titleFontFamily : 'Microsoft Yahei',
							titleFontWeight: 'bold',
							titlePaddingTop : 0,
							titlePaddingRight : 0,
							titlePaddingBottom : 10,
							titlePaddingLeft : 0,
							displayDesc : true,
							descFontSize: 14,
							descFontColor: '#6b6b6b',
							descFontFamily : 'Microsoft Yahei',
							paddingTop : 0,
							paddingRight : 0,
							paddingBottom : 0,
							paddingLeft : 0,
							backgroundColor: '#fff',
							hoverColor: '#ca0c16'
						}
					})
				</script>

			
				<div class="recommend-item-box csdn-tracking-statistics" data-mod="popu_387" data-poputype="feed"  data-feed-show="false"  data-dsm="post">
		<h4 class="text-truncate">
			<a href="https://blog.csdn.net/city_of_the_sky/article/details/29354249" target="_blank" strategy="BlogCommendFromBaidu_2">
				<em>live555</em>学习三：<em>RTP</em>数据流的获取			</a>
		</h4>
		<p class="content">
			<a href="https://blog.csdn.net/city_of_the_sky/article/details/29354249" target="_blank" >
				前面有说到流struct streamState
 ，gaijiegoutizhong			</a>
		</p>
		<div class="info-box d-flex align-content-center">
			<p>
				<a class="avatar" src="https://blog.csdn.net/city_of_the_sky" title="city_of_the_sky" target="_blank">
					<img src="https://avatar.csdn.net/5/4/C/3_city_of_the_sky.jpg" alt="city_of_the_sky" class="avatar-pic">
					<span class="name">city_of_the_sky</span>
				</a>
			</p>
			<p>
				<span class="date">2014-06-08 10:35:06</span>
			</p>
			<p>
				<span class="read-num">阅读数：1293</span>
			</p>
		</div>
	</div>
					<div class="recommend-item-box csdn-tracking-statistics" data-mod="popu_387" data-poputype="feed"  data-feed-show="false"  data-dsm="post">
		<h4 class="text-truncate">
			<a href="https://blog.csdn.net/rrs123/article/details/50371598" target="_blank" strategy="BlogCommendFromBaidu_3">
				<em>Live555</em>通过SDP文本信息实现对<em>RTP</em>的接收			</a>
		</h4>
		<p class="content">
			<a href="https://blog.csdn.net/rrs123/article/details/50371598" target="_blank" >
				笔者最近因为工做中需要用到此功能，特把实现方法分享给有兴趣的网友。
我的方法来自<em>Live555</em>官方论坛最权威的方案，如下：
[Live-devel] Once again, SDP support...			</a>
		</p>
		<div class="info-box d-flex align-content-center">
			<p>
				<a class="avatar" src="https://blog.csdn.net/rrs123" title="rrs123" target="_blank">
					<img src="https://avatar.csdn.net/B/A/6/3_rrs123.jpg" alt="rrs123" class="avatar-pic">
					<span class="name">rrs123</span>
				</a>
			</p>
			<p>
				<span class="date">2015-12-21 13:54:31</span>
			</p>
			<p>
				<span class="read-num">阅读数：1389</span>
			</p>
		</div>
	</div>
					<div class="recommend-item-box csdn-tracking-statistics" data-mod="popu_387" data-poputype="feed"  data-feed-show="false"  data-dsm="post">
		<h4 class="text-truncate">
			<a href="https://blog.csdn.net/nkmnkm/article/details/6931400" target="_blank" strategy="BlogCommendFromBaidu_4">
				<em>live555</em><em>学习笔记</em>9－h264 <em>RTP</em>传输详解(1)			</a>
		</h4>
		<p class="content">
			<a href="https://blog.csdn.net/nkmnkm/article/details/6931400" target="_blank" >
				九 h264 <em>RTP</em>传输详解(1)


前几章对Server端的介绍中有个比较重要的问题没有仔细探究：如何打开文件并获得其SDP信息。我们就从这里入手吧。


当RTSPServer收到对...			</a>
		</p>
		<div class="info-box d-flex align-content-center">
			<p>
				<a class="avatar" src="https://blog.csdn.net/nkmnkm" title="nkmnkm" target="_blank">
					<img src="https://avatar.csdn.net/5/B/B/3_nkmnkm.jpg" alt="nkmnkm" class="avatar-pic">
					<span class="name">nkmnkm</span>
				</a>
			</p>
			<p>
				<span class="date">2011-11-03 11:21:52</span>
			</p>
			<p>
				<span class="read-num">阅读数：18930</span>
			</p>
		</div>
	</div>
					<div class="recommend-item-box csdn-tracking-statistics" data-mod="popu_387" data-poputype="feed"  data-feed-show="false"  data-dsm="post">
		<h4 class="text-truncate">
			<a href="https://blog.csdn.net/angelzyb/article/details/21044315" target="_blank" strategy="BlogCommendFromBaidu_5">
				<em>live555</em> client 接收<em>rtp</em>数据			</a>
		</h4>
		<p class="content">
			<a href="https://blog.csdn.net/angelzyb/article/details/21044315" target="_blank" >
				2014-03-08  22:05:58  


描述<em>live555</em> client即openRTSP的流程，简单点说，playCommon.cpp，流为h264和g726。在实际项目中已成功应用...			</a>
		</p>
		<div class="info-box d-flex align-content-center">
			<p>
				<a class="avatar" src="https://blog.csdn.net/angelzyb" title="angelzyb" target="_blank">
					<img src="https://avatar.csdn.net/4/D/C/3_angelzyb.jpg" alt="angelzyb" class="avatar-pic">
					<span class="name">angelzyb</span>
				</a>
			</p>
			<p>
				<span class="date">2014-03-11 22:13:18</span>
			</p>
			<p>
				<span class="read-num">阅读数：1941</span>
			</p>
		</div>
	</div>
					<div class="recommend-item-box recommend-ad-box" id="a_d_feed_0"></div>
			<script>
				var width = $("div.recommend-box").outerWidth() - 48;
				NEWS_FEED({
					w: width,
					h: 90,
					showid: 'Afihld',
					placeholderId: 'a_d_feed_0',
					inject: 'define',
					define: {
						imagePosition: 'right',
						imageBorderRadius: 0,
						imageWidth: 120,
						imageHeight: 90,
						imageFill: 'clip',
						displayImage: true,
						displayTitle: true,
						titleFontSize: 20,
						titleFontColor: '#333',
						titleFontFamily: 'Microsoft Yahei',
						titleFontWeight: 'bold',
						titlePaddingTop: 0,
						titlePaddingRight: 0,
						titlePaddingBottom: 10,
						titlePaddingLeft: 0,
						displayDesc: true,
						descFontSize: 14,
						descFontColor: '#6b6b6b',
						descFontFamily: 'Microsoft Yahei',
						paddingTop: 0,
						paddingRight: 0,
						paddingBottom: 0,
						paddingLeft: 0,
						backgroundColor: '#fff',
						hoverColor: '#ca0c16'
					}
				})
			</script>
			<div class="recommend-item-box csdn-tracking-statistics" data-mod="popu_387" data-poputype="feed"  data-feed-show="false"  data-dsm="post">
		<h4 class="text-truncate">
			<a href="https://blog.csdn.net/maikforever/article/details/6420342" target="_blank" strategy="BlogCommendFromBaidu_6">
				基于<em>live555</em>的<em>rtp</em>/rtcp研究 			</a>
		</h4>
		<p class="content">
			<a href="https://blog.csdn.net/maikforever/article/details/6420342" target="_blank" >
				 流媒体网络传输要满足高带宽，低传输延迟，支持组播模式，基于差错恢复的可靠保证和通道同步（尤其是视频和音频流的同步）。<em>RTP</em>/RTCP是一种基于组播的应用层协议，也是流媒体传输使用最广泛的协议。  实...			</a>
		</p>
		<div class="info-box d-flex align-content-center">
			<p>
				<a class="avatar" src="https://blog.csdn.net/maikforever" title="maikforever" target="_blank">
					<img src="https://avatar.csdn.net/1/4/E/3_maikforever.jpg" alt="maikforever" class="avatar-pic">
					<span class="name">maikforever</span>
				</a>
			</p>
			<p>
				<span class="date">2011-05-14 21:27:00</span>
			</p>
			<p>
				<span class="read-num">阅读数：605</span>
			</p>
		</div>
	</div>
					<div class="recommend-item-box csdn-tracking-statistics" data-mod="popu_387" data-poputype="feed"  data-feed-show="false"  data-dsm="post">
		<h4 class="text-truncate">
			<a href="https://blog.csdn.net/wangjianzhongfj/article/details/39059497" target="_blank" strategy="BlogCommendFromBaidu_7">
				ffmpeg用来进行编码解码，<em>live555</em>用来进行传输rtsp、<em>rtp</em>			</a>
		</h4>
		<p class="content">
			<a href="https://blog.csdn.net/wangjianzhongfj/article/details/39059497" target="_blank" >
				本文概要：

                本文介绍了一种常用成熟的多媒体解码方案。使用<em>live555</em>作为流媒体数据源，建立rtsp会话请求h264数据流。后端使用ffmpeg解码h264流并保...			</a>
		</p>
		<div class="info-box d-flex align-content-center">
			<p>
				<a class="avatar" src="https://blog.csdn.net/wangjianzhongfj" title="wangjianzhongfj" target="_blank">
					<img src="https://avatar.csdn.net/7/7/0/3_wangjianzhongfj.jpg" alt="wangjianzhongfj" class="avatar-pic">
					<span class="name">wangjianzhongfj</span>
				</a>
			</p>
			<p>
				<span class="date">2014-09-04 21:20:41</span>
			</p>
			<p>
				<span class="read-num">阅读数：4795</span>
			</p>
		</div>
	</div>
					<div class="recommend-item-box csdn-tracking-statistics" data-mod="popu_387" data-poputype="feed"  data-feed-show="false"  data-dsm="post">
		<h4 class="text-truncate">
			<a href="https://blog.csdn.net/nkmnkm/article/details/6936108" target="_blank" strategy="BlogCommendFromBaidu_8">
				<em>live555</em><em>学习笔记</em>10－h264 <em>RTP</em>传输详解(2)			</a>
		</h4>
		<p class="content">
			<a href="https://blog.csdn.net/nkmnkm/article/details/6936108" target="_blank" >
				十 h264 <em>RTP</em>传输详解(2)


上一章并没有把打开文件分析文件的代码找到，因为发现它隐藏得比较深，而且H264的Source又有多个，形成了连环计。所以此章中就将文件处理与H264的So...			</a>
		</p>
		<div class="info-box d-flex align-content-center">
			<p>
				<a class="avatar" src="https://blog.csdn.net/nkmnkm" title="nkmnkm" target="_blank">
					<img src="https://avatar.csdn.net/5/B/B/3_nkmnkm.jpg" alt="nkmnkm" class="avatar-pic">
					<span class="name">nkmnkm</span>
				</a>
			</p>
			<p>
				<span class="date">2011-11-04 15:52:54</span>
			</p>
			<p>
				<span class="read-num">阅读数：15874</span>
			</p>
		</div>
	</div>
					<div class="recommend-item-box csdn-tracking-statistics" data-mod="popu_387" data-poputype="feed"  data-feed-show="false"  data-dsm="post">
		<h4 class="text-truncate">
			<a href="https://blog.csdn.net/nkmnkm/article/details/6914637" target="_blank" strategy="BlogCommendFromBaidu_9">
				<em>live555</em><em>学习笔记</em>6－建立<em>RTP</em>会话			</a>
		</h4>
		<p class="content">
			<a href="https://blog.csdn.net/nkmnkm/article/details/6914637" target="_blank" >
				六　建立<em>RTP</em>会话


首先更正一个概念：
ServerMediaSession原先说代表一个流，其实是不准确的。它代表的是server端的一个媒体的名字，而说ServerMediaSubse...			</a>
		</p>
		<div class="info-box d-flex align-content-center">
			<p>
				<a class="avatar" src="https://blog.csdn.net/nkmnkm" title="nkmnkm" target="_blank">
					<img src="https://avatar.csdn.net/5/B/B/3_nkmnkm.jpg" alt="nkmnkm" class="avatar-pic">
					<span class="name">nkmnkm</span>
				</a>
			</p>
			<p>
				<span class="date">2011-10-28 15:19:21</span>
			</p>
			<p>
				<span class="read-num">阅读数：22214</span>
			</p>
		</div>
	</div>
			            <!-- 第四范式SDK -->
<script src="https://nbrecsys.4paradigm.com/resource/js/sdk-csdn-smallflow@js" async defer></script>
            <div class="recommend-loading-box">
                <img src='https://csdnimg.cn/release/phoenix/images/feedLoading.gif'>
            </div>
            <div class="recommend-end-box">
                <p class="text-center">没有更多推荐了，<a href="https://blog.csdn.net/" class="c-blue c-blue-hover c-blue-focus">返回首页</a></p>
            </div>
        </div>
    <div style="border-bottom: dashed 1px #666;"><span style="font-size: 0.8em; font-weight: bold;">此PDF由<a style="color:#0000ff" href="http://www.github.com/spygg">spygg</a>生成,请尊重原作者版权!!!<br/>我的邮箱:liushidc@163.com</span></div> </main>
    <aside style="display: none;">
		    <div id="asideProfile" class="aside-box">
    <h3 class="aside-title">个人资料</h3>
    <div class="profile-intro d-flex">
        <div class="avatar-box d-flex justify-content-center flex-column">
            <a href="https://blog.csdn.net/leixiaohua1020">
                <img src="https://avatar.csdn.net/A/7/6/3_leixiaohua1020.jpg" class="avatar_pic">
            </a>
        </div>
        <div class="user-info d-flex justify-content-center flex-column">
            <p class="name csdn-tracking-statistics tracking-click" data-mod="popu_379">
                <a href="https://blog.csdn.net/leixiaohua1020" target="_blank" class="text-truncate" id="uid">leixiaohua1020</a>
            </p>
                    </div>
                <div class="opt-box d-flex justify-content-center flex-column">
            <span  class="csdn-tracking-statistics tracking-click" data-mod="popu_379">
                                <a class="btn btn-sm btn-red-hollow" href="https://passport.csdn.net/account/login?from=https://blog.csdn.net/leixiaohua1020/article/details/11850969" target="_self">关注</a>
                            </span>
                    </div>
            </div>
    <div class="data-info d-flex item-tiling">
                <dl class="text-center" title="373">
                        <dt><a href="https://blog.csdn.net/leixiaohua1020?t=1">原创</a></dt>
            <dd><a href="https://blog.csdn.net/leixiaohua1020?t=1"><span class="count">373</span></a></dd>
                    </dl>
        <dl class="text-center" title="14088">
            <dt>粉丝</dt>
            <dd><span class="count" id="fan">1万+</span></dd>
        </dl>
        <dl class="text-center" title="460">
            <dt>喜欢</dt>
            <dd><span class="count">460</span></dd>
        </dl>
        <dl class="text-center" title="7317">
            <dt>评论</dt>
            <dd><span class="count">7317</span></dd>
        </dl>
    </div>
    <div class="grade-box clearfix">
        <dl>
            <dt>等级：</dt>
            <dd>
                <a href="https://blog.csdn.net/home/help.html#level" title="9级,点击查看等级说明" target="_blank">
                    <svg class="icon icon-level" aria-hidden="true">
                        <use xlink:href="#csdnc-bloglevel-9"></use>
                    </svg>
                </a>
            </dd>
        </dl>
        <dl>
            <dt>访问：</dt>
            <dd title="10421629">
                1042万+            </dd>
        </dl>
        <dl>
            <dt>积分：</dt>
            <dd title="62879">
                6万+            </dd>
        </dl>
        <dl title="49">
            <dt>排名：</dt>
            <dd>49</dd>
        </dl>
    </div>
        <div class="badge-box d-flex">
        <span>勋章：</span>
                <a class="icon-badge" title="专栏达人">
            <svg class="icon" aria-hidden="true">
                <use xlink:href="#csdnc-m-columns"></use>
            </svg>
            <div class="icon-arrow"></div>
            <div class="grade-detail-box item1">
                <div class="pos-box">
                    <div class="left-box d-flex justify-content-center align-items-center flex-column">
                        <svg class="icon" aria-hidden="true">
                            <use xlink:href="#csdnc-m-columns"></use>
                        </svg>
                        <p>专栏达人</p>
                    </div>
                    <div class="right-box d-flex justify-content-center align-items-center">
                        授予成功创建个人博客专栏的用户。专栏中添加五篇以上博文即可点亮！撰写博客专栏浓缩技术精华，专栏达人就是你！
                    </div>
                </div>
            </div> 
        </a>  
                        <a class="icon-badge" title="持之以恒">
            <svg class="icon" aria-hidden="true">
                <use xlink:href="#csdnc-m-lasting"></use>
            </svg>
            <div class="icon-arrow"></div>
            <div class="grade-detail-box item2">
                <div class="pos-box">
                    <div class="left-box d-flex justify-content-center align-items-center flex-column">
                        <svg class="icon" aria-hidden="true">
                            <use xlink:href="#csdnc-m-lasting"></use>
                        </svg>
                        <p>持之以恒</p>
                    </div>
                    <div class="right-box d-flex justify-content-center align-items-center">
                        授予每个自然月内发布4篇或4篇以上原创或翻译IT博文的用户。不积跬步无以至千里，不积小流无以成江海，程序人生的精彩需要坚持不懈地积累！
                    </div>
                </div>
            </div>
        </a>
                                <a class="icon-badge" title="博客之星">
            <svg class="icon" aria-hidden="true">
                <use xlink:href="#csdnc-m-blogstar-l"></use>
            </svg>
            <div class="icon-arrow"></div>
            <div class="grade-detail-box item4">
                <div class="pos-box">
                    <div class="left-box d-flex justify-content-center align-items-center flex-column">
                        <svg class="icon" aria-hidden="true">
                            <use xlink:href="#csdnc-m-blogstar-l"></use>
                        </svg>
                        <p>博客之星</p>
                    </div>
                    <div class="right-box d-flex justify-content-center align-items-center">
                        授予通过"CSDN博客之星评选"中脱颖而出的十大博客之星称号的用户。
                    </div>
                </div>
            </div>
        </a>   
            </div>
    </div>		    <div class="csdn-tracking-statistics mb8 box-shadow" data-pid="blog" data-mod="popu_4" style="height:250px;">
    <div class="aside-content text-center" id="cpro_u2734133">
        <!-- 投放代码 -->
        <script type="text/javascript" src="//cee1.iteye.com/lgyyovfyh@js"></script>
    </div>
</div>
		    <!--自定义模块-->
<div id="asideCustom26787557" class="aside-box custom-box">
    <h3 class="aside-title">关于我</h3>
    <div class="aside-content clearfix">
        姓名：雷霄骅<br>
网名：leixiaohua1020<br>
本科：<br>
中国传媒大学-广播电视工程<br>
硕士：<br>
中国传媒大学-数字电视技术<br>
博士：<br>
中国传媒大学-数字视频技术<br>
Email：<br>
leixiaohua1020@126.com<br>
QQ：<br>
494085803<br>
<br>
[注1：QQ消息较多，难以一一回复，见谅]<br>
[注2：CSDN私信功能使用很少，有问题可以直接在博客评论处留言]<br>
<br>
奖项：<br>
<a href="http://vote.blog.csdn.net/Blogstar2014/List">2014年度 - CSDN博客之星</a><br>
<a href="https://mvp.microsoft.com/en-us/mvp/Xiaohua%20Lei-5001392">2015年度 - 微软MVP</a><br>
<a href="http://bss.csdn.net/m/topic/community_star/index">2015年度 - CSDN博客之星</a><br>
简介：<br>
主要从事与广播电视有关的视音频技术的研究。包括视音频质量评价，视音频编解码，流媒体，媒资检索等。
<br>    </div>
</div>
		    <div id="asideNewArticle" class="aside-box">
    <h3 class="aside-title">最新文章</h3>
    <div class="aside-content">
        <ul class="inf_list clearfix csdn-tracking-statistics tracking-click" data-mod="popu_382">
                        <li class="clearfix">
                <a href="https://blog.csdn.net/leixiaohua1020/article/details/51187668" target="_blank">[投稿] Speex回声消除原理深度解析</a>
            </li>
                        <li class="clearfix">
                <a href="https://blog.csdn.net/leixiaohua1020/article/details/50789619" target="_blank">[投稿]房间声学原理与Schroeder混响算法实现</a>
            </li>
                        <li class="clearfix">
                <a href="https://blog.csdn.net/leixiaohua1020/article/details/50789503" target="_blank">[投稿]一个频域语音降噪算法实现及改进方法</a>
            </li>
                        <li class="clearfix">
                <a href="https://blog.csdn.net/leixiaohua1020/article/details/50618190" target="_blank">最简单的基于FFmpeg的AVfilter的例子-纯净版</a>
            </li>
                        <li class="clearfix">
                <a href="https://blog.csdn.net/leixiaohua1020/article/details/50535230" target="_blank">视音频数据处理入门：UDP-RTP协议解析</a>
            </li>
                    </ul>
    </div>
</div>
		    <div id="asideColumn" class="aside-box">
    <h3 class="aside-title">博主专栏</h3>
    <div class="aside-content">
        <ul class="column-box csdn-tracking-statistics tracking-click" data-mod="popu_520" >
                            <li class="clearfix">
                    <div class="img-box float-left">
                        <a class="d-flex align-items-center" href="https://blog.csdn.net/column/details/videoquality.html">
                            <img src="https://img-blog.csdn.net/20151123175555036?imageView2/5/w/120/h/120" alt="">
                        </a>
                    </div>
                    <div class="info">
                        <p class="title"><a href="https://blog.csdn.net/column/details/videoquality.html">视频质量评价</a></p>
                        <div class="data">阅读量：<span>434203</span><span class="count">41 篇</span></div>
                    </div>
                </li>
                            <li class="clearfix">
                    <div class="img-box float-left">
                        <a class="d-flex align-items-center" href="https://blog.csdn.net/column/details/osmedia.html">
                            <img src="https://img-blog.csdn.net/20151123175559974?imageView2/5/w/120/h/120" alt="">
                        </a>
                    </div>
                    <div class="info">
                        <p class="title"><a href="https://blog.csdn.net/column/details/osmedia.html">开源多媒体项目源代码分析</a></p>
                        <div class="data">阅读量：<span>1158961</span><span class="count">91 篇</span></div>
                    </div>
                </li>
                            <li class="clearfix">
                    <div class="img-box float-left">
                        <a class="d-flex align-items-center" href="https://blog.csdn.net/column/details/ffmpeg-devel.html">
                            <img src="https://img-blog.csdn.net/20151123175857395?imageView2/5/w/120/h/120" alt="">
                        </a>
                    </div>
                    <div class="info">
                        <p class="title"><a href="https://blog.csdn.net/column/details/ffmpeg-devel.html">FFmpeg</a></p>
                        <div class="data">阅读量：<span>4852474</span><span class="count">135 篇</span></div>
                    </div>
                </li>
                    </ul>
    </div>
    </div>
		    <div id="asideArchive" class="aside-box flexible-box">
    <h3 class="aside-title">归档</h3>
    <div class="aside-content">
        <ul class="archive-list">
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/leixiaohua1020/article/month/2016/04">
                    2016年4月                    <span class="count float-right">1篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/leixiaohua1020/article/month/2016/03">
                    2016年3月                    <span class="count float-right">2篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/leixiaohua1020/article/month/2016/02">
                    2016年2月                    <span class="count float-right">1篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/leixiaohua1020/article/month/2016/01">
                    2016年1月                    <span class="count float-right">7篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/leixiaohua1020/article/month/2015/12">
                    2015年12月                    <span class="count float-right">1篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/leixiaohua1020/article/month/2015/11">
                    2015年11月                    <span class="count float-right">7篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/leixiaohua1020/article/month/2015/08">
                    2015年8月                    <span class="count float-right">4篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/leixiaohua1020/article/month/2015/07">
                    2015年7月                    <span class="count float-right">17篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/leixiaohua1020/article/month/2015/06">
                    2015年6月                    <span class="count float-right">6篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/leixiaohua1020/article/month/2015/05">
                    2015年5月                    <span class="count float-right">12篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/leixiaohua1020/article/month/2015/04">
                    2015年4月                    <span class="count float-right">7篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/leixiaohua1020/article/month/2015/03">
                    2015年3月                    <span class="count float-right">25篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/leixiaohua1020/article/month/2015/02">
                    2015年2月                    <span class="count float-right">7篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/leixiaohua1020/article/month/2015/01">
                    2015年1月                    <span class="count float-right">11篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/leixiaohua1020/article/month/2014/12">
                    2014年12月                    <span class="count float-right">10篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/leixiaohua1020/article/month/2014/11">
                    2014年11月                    <span class="count float-right">9篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/leixiaohua1020/article/month/2014/10">
                    2014年10月                    <span class="count float-right">20篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/leixiaohua1020/article/month/2014/09">
                    2014年9月                    <span class="count float-right">5篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/leixiaohua1020/article/month/2014/08">
                    2014年8月                    <span class="count float-right">7篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/leixiaohua1020/article/month/2014/07">
                    2014年7月                    <span class="count float-right">2篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/leixiaohua1020/article/month/2014/06">
                    2014年6月                    <span class="count float-right">8篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/leixiaohua1020/article/month/2014/05">
                    2014年5月                    <span class="count float-right">10篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/leixiaohua1020/article/month/2014/04">
                    2014年4月                    <span class="count float-right">1篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/leixiaohua1020/article/month/2014/02">
                    2014年2月                    <span class="count float-right">5篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/leixiaohua1020/article/month/2014/01">
                    2014年1月                    <span class="count float-right">14篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/leixiaohua1020/article/month/2013/12">
                    2013年12月                    <span class="count float-right">21篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/leixiaohua1020/article/month/2013/11">
                    2013年11月                    <span class="count float-right">71篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/leixiaohua1020/article/month/2013/10">
                    2013年10月                    <span class="count float-right">161篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/leixiaohua1020/article/month/2013/09">
                    2013年9月                    <span class="count float-right">101篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/leixiaohua1020/article/month/2013/08">
                    2013年8月                    <span class="count float-right">1篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/leixiaohua1020/article/month/2013/06">
                    2013年6月                    <span class="count float-right">2篇</span>
                </a>
            </li>
                        <!--归档统计-->
            <li>
                <a href="https://blog.csdn.net/leixiaohua1020/article/month/2013/03">
                    2013年3月                    <span class="count float-right">2篇</span>
                </a>
            </li>
                    </ul>
    </div>
        <p class="text-center">
        <a class="btn btn-link-blue flexible-btn" data-fbox="aside-archive">展开</a>
    </p>
    </div>
		    <div id="asideNewComments" class="aside-box">
    <h3 class="aside-title">最新评论</h3>
    <div class="aside-content">
        <ul class="newcomment-list">
                        <li>
                <a class="title text-truncate" target="_blank" href="https://blog.csdn.net/leixiaohua1020/article/details/15811977#comments">[总结]FFMPEG视音频编解码零...</a>
                <p class="comment">
                    <a href="https://my.csdn.net/tanhuifang520" class="user-name" target="_blank">tanhuifang520</a>：含着敬畏的心情又看了遍这个文章                </p>
            </li>
                        <li>
                <a class="title text-truncate" target="_blank" href="https://blog.csdn.net/leixiaohua1020/article/details/42105049#comments">最简单的基于librtmp的示例：...</a>
                <p class="comment">
                    <a href="https://my.csdn.net/qq_32245927" class="user-name" target="_blank">qq_32245927</a>：[reply]hjl19901012[/reply]
你们的是哪里有问题呢                </p>
            </li>
                        <li>
                <a class="title text-truncate" target="_blank" href="https://blog.csdn.net/leixiaohua1020/article/details/46754977#comments">视频编码器评测系统：VideoCo...</a>
                <p class="comment">
                    <a href="https://my.csdn.net/tqs_1220" class="user-name" target="_blank">tqs_1220</a>：天妒英才                </p>
            </li>
                        <li>
                <a class="title text-truncate" target="_blank" href="https://blog.csdn.net/leixiaohua1020/article/details/38284961#comments">FFmpeg获取DirectSho...</a>
                <p class="comment">
                    <a href="https://my.csdn.net/a137748099" class="user-name" target="_blank">a137748099</a>：[reply]liangqingzhi[/reply]
大佬，有的电脑使用regsvr32注册不成...                </p>
            </li>
                        <li>
                <a class="title text-truncate" target="_blank" href="https://blog.csdn.net/leixiaohua1020/article/details/15811977#comments">[总结]FFMPEG视音频编解码零...</a>
                <p class="comment">
                    <a href="https://my.csdn.net/qq_17276615" class="user-name" target="_blank">qq_17276615</a>：每次视频编解码都会搜到你的文章，感谢您给我们这些菜鸡一些指引。谢谢！                </p>
            </li>
                    </ul>
    </div>
</div>
		<div id="asideFooter">
			
		<div class="aside-box">
						<script type="text/javascript" src="//cee1.iteye.com/avneunkwb@js"></script>
					</div>
				<div class="aside-box">
			<div class="persion_article">
			</div>
		</div>
	</div>
</aside>
<script src="https://csdnimg.cn/pubfooter/js/publib_footer-1.0.3@js" data-isfootertrack="false" type="text/javascript"></script>
<script>
	$("a.flexible-btn").click(function(){
		$(this).parents('div.aside-box').removeClass('flexible-box');
		$(this).remove();
	})
</script>
</div>
<div class="mask-dark"></div>
<div class="pulllog-box" style="display: none;">
	<div class="pulllog clearfix">
		<span class="text float-left">加入CSDN，享受更精准的内容推荐，与500万程序员共同成长！</span>
		<div class="pulllog-btn float-right clearfix">
            <button class="pulllog-login float-left csdn-tracking-statistics tracking-click" data-mod="popu_557">
                登录
            </button>
            <div class="pulllog-sigin float-left csdn-tracking-statistics tracking-click" data-mod="popu_558">
                <a href="https://passport.csdn.net/account/mobileregister" target="_blank">注册</a>
            </div>
            <button class="btn-close">
                <svg class="icon" aria-hidden="true">
                    <use xlink:href="#csdnc-times"></use>
                </svg>
            </button>
		</div>
	</div>
</div>
<div id="loginWrap" style="display:none"></div>
<div class="tool-box">
	<ul class="meau-list">
		<li>
			<button class="btn-like " title="点赞">
				<svg class="icon active" aria-hidden="true">
					<use xlink:href="#csdnc-thumbsup-ok"></use>
				</svg><svg class="icon no-active" aria-hidden="true">
					<use xlink:href="#csdnc-thumbsup"></use>
				</svg>
				<p>1</p>
			</button>
		</li>
		<li class="toc-container-box" id="liTocBox">
			<button class="btn-toc" title="目录">
				<svg class="icon" aria-hidden="true">
					<use xlink:href="#csdnc-contents"></use>
				</svg><br>目录
			</button>
			<div class="toc-container">
				<div class="pos-box">
					<div class="icon-arrow"></div>
					<div class="scroll-box">
						<div class="toc-box"></div>
					</div>
				</div>
				<div class="opt-box">
					<button class="btn-opt prev nomore" title="向上">
						<svg class="icon" aria-hidden="true">
							<use xlink:href="#csdnc-chevronup"></use>
						</svg>
					</button>
					<button class="btn-opt next">
						<svg class="icon" aria-hidden="true">
							<use xlink:href="#csdnc-chevrondown"></use>
						</svg>
					</button>
				</div>
			</div>
		</li>
		<li>
			<button class="btn-bookmark" title="收藏">
				<svg class="icon active" aria-hidden="true">
					<use xlink:href="#csdnc-bookmark-ok"></use>
				</svg><svg class="icon no-active" aria-hidden="true">
					<use xlink:href="#csdnc-bookmark"></use>
				</svg><br>收藏
			</button>
		</li>
		<li>
			<a class="btn-comments" title="评论" href="#commentBox">
				<svg class="icon" aria-hidden="true">
					<use xlink:href="#csdnc-comments"></use>
				</svg><br>评论
			</a>
		</li>
				<li class="bdsharebuttonbox">
			<a class="btn-comments bds_weixin" data-cmd="weixin" title="微信分享">
				<svg class="icon" aria-hidden="true">
					<use xlink:href="#csdnc-wechat"></use>
				</svg><br>微信
			</a>
		</li>
		<li class="bdsharebuttonbox">
			<a class="btn-comments bds_tsina" data-cmd="tsina" title="微博分享">
				<svg class="icon" aria-hidden="true">
					<use xlink:href="#csdnc-weibo"></use>
				</svg><br>微博
			</a>
		</li>
		<li class="bdsharebuttonbox">
			<a class="btn-comments bds_qzone" data-cmd="qzone" title="QQ分享">
				<svg class="icon" aria-hidden="true">
					<use xlink:href="#csdnc-qq"></use>
				</svg><br>QQ
			</a>
		</li>
	</ul>
</div>
<script>window._bd_share_config = { "common": { "bdSnsKey": {}, "bdText": "", "bdMini": "1", "bdMiniList": false, "bdPic": "", "bdStyle": "0", "bdSize": "16" }, "share": {} }; with (document) 0[(getElementsByTagName('head')[0] || body).appendChild(createElement('script')).src = 'https://csdnimg.cn/static/api/js/share@js?v=89860594'];</script>
<script>
    var recommendCount = 10;
    recommendCount = recommendCount > 1 ? (recommendCount + (recommendCount>6 ? 2 : 1)) : recommendCount;
    var articleTit = "live555学习笔记－RTP打包与发送";
    var ChannelId = 16;
    var articleId = "11850969";
    var commentscount = 2;
    var islock = false;
    var curentUrl = "https://blog.csdn.net/leixiaohua1020/article/details/11850969";
    var myUrl = "https://my.csdn.net/";
    //1禁止评论，2正常
    var commentAuth = 2;
    //百度搜索
    var baiduKey = "live555+rtp+%E6%8E%A8%E6%B5%81";
    var needInsertBaidu = false;
</script>
<script src="https://csdnimg.cn/public/sandalstrap/1.3/js/sandalstrap.min@js"></script>
<script src="https://csdnimg.cn/release/phoenix/vendor/pagination/paging@js"></script>

<script>
    GoTop({
        right: 8,
        hasReport: true,
        reportFun: function() {
            showReport(false,"live555学习笔记－RTP打包与发送");
        }
    })
</script>
<script src="https://csdnimg.cn/release/phoenix/template/js/common-bd54b21308.min@js"></script>
<script src="https://csdnimg.cn/release/phoenix/template/js/detail-effe72036e.min@js"></script>
<script src="https://csdnimg.cn/release/phoenix/themes/skin3-template/skin3-template-46c7bd3d86.min@js"></script>
<script src="https://csdnimg.cn/search/baidu_search-1.1.2@js?v=201802071056&autorun=true&install=true&keyword=live555+rtp+%E6%8E%A8%E6%B5%81"  type="text/javascript"></script>
</body>
<div class="box-box-default" style="display:none;">
    <a class="btn-remove">
        关闭
    </a>
    <script type="text/javascript" src="//cee1.iteye.com/mhzzjepzz@js"></script>
</div>
<div class="box-box-large" style="display:none;">
    <a class="btn-remove">
        关闭
    </a>
    <script type="text/javascript" src="//cee1.iteye.com/idvveasfs@js"></script>
</div>
</html>